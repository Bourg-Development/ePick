<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%- title %></title>
    <link rel="icon" type="image/svg+xml" href="/static/media/logos/favico.png">
    <link href="https://fonts.googleapis.com/css2?family=Arial:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet" />
    <link rel="stylesheet" href="/static/stylesheets/common/main.css">
    <link rel="stylesheet" href="/static/stylesheets/common/restricted/sidebar.css">
    <link rel="stylesheet" href="/static/stylesheets/common/restricted/navbar.css">
    <link rel="stylesheet" href="/static/stylesheets/common/restricted/main.css">
    <% if (typeof styles !== 'undefined') { %>
        <% styles.forEach(style => { %>
            <link rel="stylesheet" href="/static/stylesheets/<%= style %>">
        <% }); %>
    <% } %>
</head>
<body>
<%- include('../partials/restricted/navigation/navbar.ejs') %>

<div class="main-container">
    <%- include('../partials/restricted/navigation/sidebar.ejs') %>

    <main class="content">
        <%- body %>
        <!-- Toast container -->
        <div class="toast-container" id="toastContainer"></div>
    </main>
</div>

<%- datePreferencesScript %>

<script>
// Make translations available to JavaScript
window.translations = {
    common: {
        active: "<%= __('common.active') %>",
        inactive: "<%= __('common.inactive') %>",
        loading: "<%= __('common.loading') %>"
    },
    patients: {
        roomPrefix: "<%= locale === 'fr' ? 'Chambre' : locale === 'es' ? 'HabitaciÃ³n' : 'Room' %>",
        unassigned: "<%= __('patients.unassigned') %>",
        // Helper function to format room number
        formatRoomNumber: function(roomNumber) {
            return this.roomPrefix + ' ' + roomNumber;
        }
    },
    filters: {
        allSpecialties: "<%= __('filters.allSpecialties') %>"
    },
    buttons: {
        edit: "<%= __('buttons.edit') %>",
        delete: "<%= __('buttons.delete') %>",
        create: "<%= __('buttons.create') %>",
        update: "<%= __('buttons.update') %>"
    },
    dashboard: {
        doctors: {
            noDoctorsFound: "<%= __('dashboard.doctors.noDoctorsFound') %>",
            failedLoadData: "<%= __('dashboard.doctors.failedLoadData') %>",
            failedLoadDoctors: "<%= __('dashboard.doctors.failedLoadDoctors') %>",
            createDoctor: "<%= __('dashboard.doctors.createDoctor') %>",
            editDoctor: "<%= __('dashboard.doctors.editDoctor') %>",
            saveSuccess: "<%= __('dashboard.doctors.saveSuccess') %>",
            saveError: "<%= __('dashboard.doctors.saveError') %>",
            deleteSuccess: "<%= __('dashboard.doctors.deleteSuccess') %>",
            deleteError: "<%= __('dashboard.doctors.deleteError') %>"
        }
    },
    dialogs: {
        deleteDoctorConfirm: "<%= __('dialogs.deleteDoctorConfirm') %>"
    },
    export: {
        success: "<%= __('export.success') %>",
        error: "<%= __('export.error') %>"
    },
    pagination: {
        page: "<%= __('pagination.page') %>",
        of: "<%= __('pagination.of') %>",
        pageInfo: "<%= __('pagination.pageInfo') %>"
    }
};
</script>

<!-- CSRF Protection -->
<script src="/static/scripts/common/csrf.js"></script>

<script src="/static/scripts/common/main.js"></script>
<script src="/static/scripts/common/api.js"></script>
<script src="/static/scripts/common/restricted/sidebar.js" defer></script>
<script src="/static/scripts/common/restricted/navbar.js" defer></script>
<script src="/static/scripts/common/restricted/main.js" defer></script>

<% if (typeof scripts !== 'undefined') { %>
    <% scripts.forEach(script => { %>
        <script src="/static/scripts/<%= script %>"></script>
    <% }); %>
<% } %>
</body>
</html>